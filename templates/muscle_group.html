{% extends 'base.html' %}

{% block title %}{{ muscle_group|capitalize }} Exercises - IronBeast Gym{% endblock %}

{% block content %}
    <!-- Muscle Group Header -->
    <div class="bg-gray-900 py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-bold text-center golden-text mb-2">{{ muscle_group|upper }} EXERCISES</h1>
            <p class="text-xl text-center text-gray-300 max-w-3xl mx-auto">
                Specialized exercises targeting your {{ muscle_group }} muscles for optimal growth and strength.
            </p>
        </div>
    </div>
    
    <!-- Muscle Group Content -->
    <div class="bg-black py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- Featured Plans with this Muscle Group -->
            {% if plans %}
                <div class="mb-12">
                    <h2 class="text-2xl font-bold golden-text mb-6">Training Plans for {{ muscle_group|capitalize }}</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {% for plan in plans %}
                            <a href="{{ url_for('exercise_plan_detail', plan_id=plan.id, muscle_group=muscle_group) }}" class="golden-card rounded-lg overflow-hidden transition-transform duration-200 hover:scale-105">
                                <div class="p-6">
                                    <h3 class="text-xl font-bold text-gold-500 mb-2">{{ plan.name }}</h3>
                                    <div class="flex items-center mb-2">
                                        <span class="bg-gold-700 text-white text-xs px-2 py-1 rounded">{{ plan.category|capitalize }}</span>
                                        <span class="ml-2 text-gray-400 text-xs px-2 py-1 rounded border border-gray-700">{{ plan.difficulty|capitalize }}</span>
                                    </div>
                                    <p class="text-gray-300 mb-4 line-clamp-2">{{ plan.description }}</p>
                                    <span class="inline-flex items-center text-gold-500 hover:text-gold-400">
                                        View Plan <i class="fas fa-chevron-right ml-1 text-xs"></i>
                                    </span>
                                </div>
                            </a>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            
            <!-- Exercise List -->
            <div>
                <h2 class="text-2xl font-bold golden-text mb-6">{{ muscle_group|capitalize }} Exercises</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {% for exercise in exercises %}
                        <div class="golden-card rounded-lg overflow-hidden">
                            <div class="relative aspect-video">
                                {% if exercise.image_url %}
                                    <img src="{{ exercise.image_url }}" alt="{{ exercise.name }}" class="object-cover w-full h-full">
                                {% else %}
                                    <div class="w-full h-full bg-gray-800 flex items-center justify-center">
                                        <i class="fas fa-dumbbell text-4xl text-gold-500"></i>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gold-500 mb-2">{{ exercise.name }}</h3>
                                <p class="text-gray-300 mb-4">{{ exercise.description }}</p>
                                
                                <div class="grid grid-cols-3 gap-2 mb-4">
                                    <div class="bg-gray-800 rounded p-2 text-center">
                                        <span class="block text-xs text-gray-400">Sets</span>
                                        <span class="text-white font-bold">{{ exercise.sets }}</span>
                                    </div>
                                    <div class="bg-gray-800 rounded p-2 text-center">
                                        <span class="block text-xs text-gray-400">Reps</span>
                                        <span class="text-white font-bold">{{ exercise.reps }}</span>
                                    </div>
                                    <div class="bg-gray-800 rounded p-2 text-center">
                                        <span class="block text-xs text-gray-400">Rest</span>
                                        <span class="text-white font-bold">{{ exercise.rest }}</span>
                                    </div>
                                </div>
                                
                                {% if exercise.video_url %}
                                    <button onclick="openVideoModal('{{ exercise.name }}', '{{ exercise.video_url }}')" 
                                            class="w-full pixel-button flex items-center justify-center">
                                        <i class="fas fa-play-circle mr-2"></i> Watch Demo
                                    </button>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Video Modal -->
    <div id="videoModal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
        <div class="fixed inset-0 bg-black opacity-80" onclick="closeVideoModal()"></div>
        
        <div class="bg-gray-900 rounded-lg w-full max-w-3xl mx-4 relative z-10 border border-gold-500">
            <div class="p-4 flex justify-between items-center border-b border-gray-800">
                <h3 id="videoTitle" class="text-xl font-bold text-gold-500"></h3>
                <button onclick="closeVideoModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="aspect-video bg-black">
                <iframe id="videoFrame" class="w-full h-full" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script>
    function openVideoModal(title, videoUrl) {
        document.getElementById('videoTitle').innerText = title;
        document.getElementById('videoFrame').src = videoUrl;
        document.getElementById('videoModal').classList.remove('hidden');
    }
    
    function closeVideoModal() {
        document.getElementById('videoFrame').src = '';
        document.getElementById('videoModal').classList.add('hidden');
    }
</script>
{% endblock %}